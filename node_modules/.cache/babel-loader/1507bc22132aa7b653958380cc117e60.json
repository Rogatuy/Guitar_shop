{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\HTMLacademy\\\\League_A\\\\Greyd\\\\Guitar_shop\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\HTMLacademy\\\\League_A\\\\Greyd\\\\Guitar_shop\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{createAsyncThunk}from'@reduxjs/toolkit';import{api,store}from'.';import{APIRoute}from'../const';import{errorHandle}from'../services/error-handle';import{loadComments,toggleLoaderComments}from'./comments-data/comments-data';import{loadGuitarFull,toggleLoaderGuitarFull}from'./guitar-full-data/guitar-full-data';import{loadGuitars}from'./guitars-data/guitars-data';export var fetchGuitarsAction=createAsyncThunk('data/fetchGuitars',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$api$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get(APIRoute.Guitars);case 3:_yield$api$get=_context.sent;data=_yield$api$get.data;store.dispatch(loadGuitars(data));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);errorHandle(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);})));export var fetchFullGuitarAction=createAsyncThunk('data/fetchFullGuitar',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var _yield$api$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return api.get(\"\".concat(APIRoute.Guitars,\"/\").concat(id));case 3:_yield$api$get2=_context2.sent;data=_yield$api$get2.data;store.dispatch(loadGuitarFull(data));_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);errorHandle(_context2.t0);store.dispatch(toggleLoaderGuitarFull());case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x){return _ref2.apply(this,arguments);};}());export var fetchCommentsAction=createAsyncThunk('data/fetchComments',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var _yield$api$get3,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return api.get(\"\".concat(APIRoute.Guitars,\"/\").concat(id,\"/comments\"));case 3:_yield$api$get3=_context3.sent;data=_yield$api$get3.data;store.dispatch(loadComments(data));_context3.next=12;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);errorHandle(_context3.t0);store.dispatch(toggleLoaderComments(true));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x2){return _ref3.apply(this,arguments);};}());","map":{"version":3,"sources":["C:/HTMLacademy/League_A/Greyd/Guitar_shop/src/store/api-actions.ts"],"names":["createAsyncThunk","api","store","APIRoute","errorHandle","loadComments","toggleLoaderComments","loadGuitarFull","toggleLoaderGuitarFull","loadGuitars","fetchGuitarsAction","get","Guitars","data","dispatch","fetchFullGuitarAction","id","fetchCommentsAction"],"mappings":"oRAAA,OAASA,gBAAT,KAAiC,kBAAjC,CACA,OAASC,GAAT,CAAcC,KAAd,KAA2B,GAA3B,CACA,OAASC,QAAT,KAAyB,UAAzB,CACA,OAASC,WAAT,KAA4B,0BAA5B,CAGA,OAASC,YAAT,CAAuBC,oBAAvB,KAAmD,+BAAnD,CACA,OAASC,cAAT,CAAyBC,sBAAzB,KAAuD,qCAAvD,CACA,OAASC,WAAT,KAA4B,6BAA5B,CAGA,MAAO,IAAMC,CAAAA,kBAAkB,CAAGV,gBAAgB,CAChD,mBADgD,sEAEhD,iMAEyBC,CAAAA,GAAG,CAACU,GAAJ,CAAiBR,QAAQ,CAACS,OAA1B,CAFzB,qCAEWC,IAFX,gBAEWA,IAFX,CAGIX,KAAK,CAACY,QAAN,CAAeL,WAAW,CAACI,IAAD,CAA1B,EAHJ,+EAKIT,WAAW,aAAX,CALJ,oEAFgD,GAA3C,CAYP,MAAO,IAAMW,CAAAA,qBAAqB,CAAGf,gBAAgB,CACnD,sBADmD,2FAEnD,kBAAOgB,EAAP,uLAEyBf,CAAAA,GAAG,CAACU,GAAJ,WAAmBR,QAAQ,CAACS,OAA5B,aAAuCI,EAAvC,EAFzB,uCAEWH,IAFX,iBAEWA,IAFX,CAGIX,KAAK,CAACY,QAAN,CAAeP,cAAc,CAACM,IAAD,CAA7B,EAHJ,mFAKIT,WAAW,cAAX,CACAF,KAAK,CAACY,QAAN,CAAeN,sBAAsB,EAArC,EANJ,sEAFmD,gEAA9C,CAaP,MAAO,IAAMS,CAAAA,mBAAmB,CAAGjB,gBAAgB,CACjD,oBADiD,2FAEjD,kBAAOgB,EAAP,uLAEyBf,CAAAA,GAAG,CAACU,GAAJ,WAAqBR,QAAQ,CAACS,OAA9B,aAAyCI,EAAzC,cAFzB,uCAEWH,IAFX,iBAEWA,IAFX,CAGIX,KAAK,CAACY,QAAN,CAAeT,YAAY,CAACQ,IAAD,CAA3B,EAHJ,mFAKIT,WAAW,cAAX,CACAF,KAAK,CAACY,QAAN,CAAeR,oBAAoB,CAAC,IAAD,CAAnC,EANJ,sEAFiD,iEAA5C","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { api, store } from '.';\r\nimport { APIRoute } from '../const';\r\nimport { errorHandle } from '../services/error-handle';\r\nimport { Comments } from '../types/comments';\r\nimport { Guitar, Guitars } from '../types/guitar';\r\nimport { loadComments, toggleLoaderComments } from './comments-data/comments-data';\r\nimport { loadGuitarFull, toggleLoaderGuitarFull } from './guitar-full-data/guitar-full-data';\r\nimport { loadGuitars } from './guitars-data/guitars-data';\r\n\r\n\r\nexport const fetchGuitarsAction = createAsyncThunk(\r\n  'data/fetchGuitars',\r\n  async () => {\r\n    try {\r\n      const {data} = await api.get<Guitars>(APIRoute.Guitars);\r\n      store.dispatch(loadGuitars(data));\r\n    } catch(error) {\r\n      errorHandle(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const fetchFullGuitarAction = createAsyncThunk(\r\n  'data/fetchFullGuitar',\r\n  async (id: number) => {\r\n    try {\r\n      const {data} = await api.get<Guitar>(`${APIRoute.Guitars}/${id}`);\r\n      store.dispatch(loadGuitarFull(data));\r\n    } catch (error) {\r\n      errorHandle(error);\r\n      store.dispatch(toggleLoaderGuitarFull());\r\n    }\r\n  },\r\n);\r\n\r\nexport const fetchCommentsAction = createAsyncThunk(\r\n  'data/fetchComments',\r\n  async (id: number | null) => {\r\n    try {\r\n      const {data} = await api.get<Comments>(`${APIRoute.Guitars}/${id}/comments`);\r\n      store.dispatch(loadComments(data));\r\n    } catch (error) {\r\n      errorHandle (error);\r\n      store.dispatch(toggleLoaderComments(true));\r\n    }\r\n  },\r\n);\r\n"]},"metadata":{},"sourceType":"module"}