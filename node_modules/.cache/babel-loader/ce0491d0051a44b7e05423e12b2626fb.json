{"ast":null,"code":"import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { APIRoute, AppRoute } from '../const';\nimport { errorHandle } from '../services/error-handle';\nimport { loadComments, toggleLoaderComments } from './comments-data/comments-data';\nimport { loadGuitarFull, toggleLoaderGuitarFull } from './guitar-full-data/guitar-full-data';\nimport { loadGuitars } from './guitars-data/guitars-data';\nimport { postUserComment } from './post-comment-data/post-comment-data';\nimport { reviewSendStatus } from './review-send-status/review-send-status';\nimport { redirectToRoute } from './action';\nexport const fetchGuitarsAction = createAsyncThunk('data/fetchGuitars', async (_arg, _ref) => {\n  let {\n    dispatch,\n    extra: api\n  } = _ref;\n\n  try {\n    const {\n      data\n    } = await api.get(APIRoute.Guitars);\n    dispatch(loadGuitars(data));\n  } catch (error) {\n    errorHandle(error);\n  }\n});\nexport const fetchFullGuitarAction = createAsyncThunk('data/fetchFullGuitar', async (id, _ref2) => {\n  let {\n    dispatch,\n    extra: api\n  } = _ref2;\n\n  try {\n    const {\n      data\n    } = await api.get(`${APIRoute.FullGuitar}/${id}`);\n    dispatch(loadGuitarFull(data));\n  } catch (error) {\n    errorHandle(error);\n    dispatch(toggleLoaderGuitarFull());\n    dispatch(redirectToRoute(AppRoute.NoFoundScreen));\n  }\n});\nexport const fetchCommentsAction = createAsyncThunk('data/fetchComments', async (id, _ref3) => {\n  let {\n    dispatch,\n    extra: api\n  } = _ref3;\n\n  try {\n    const {\n      data\n    } = await api.get(`${APIRoute.FullGuitar}/${id}/comments`);\n    dispatch(loadComments(data));\n  } catch (error) {\n    errorHandle(error);\n    dispatch(toggleLoaderComments());\n  }\n});\nexport const addComment = createAsyncThunk('data/addComment', async (comment, _ref4) => {\n  let {\n    dispatch,\n    extra: api\n  } = _ref4;\n\n  try {\n    dispatch(reviewSendStatus('sending'));\n    const {\n      data\n    } = await api.post(`${APIRoute.Comments}`, {\n      comment\n    });\n    dispatch(postUserComment(data));\n    dispatch(reviewSendStatus('initial'));\n  } catch (error) {\n    errorHandle(error);\n    dispatch(reviewSendStatus('error'));\n  }\n});","map":{"version":3,"sources":["C:/HTMLacademy/League_A/Greyd/Guitar_shop/src/store/api-actions.ts"],"names":["createAsyncThunk","APIRoute","AppRoute","errorHandle","loadComments","toggleLoaderComments","loadGuitarFull","toggleLoaderGuitarFull","loadGuitars","postUserComment","reviewSendStatus","redirectToRoute","fetchGuitarsAction","_arg","dispatch","extra","api","data","get","Guitars","error","fetchFullGuitarAction","id","FullGuitar","NoFoundScreen","fetchCommentsAction","addComment","comment","post","Comments"],"mappings":"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","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { APIRoute, AppRoute } from '../const';\r\nimport { errorHandle } from '../services/error-handle';\r\nimport { Comment, Comments } from '../types/comments';\r\nimport { Guitar, Guitars } from '../types/guitar';\r\nimport { loadComments, toggleLoaderComments } from './comments-data/comments-data';\r\nimport { loadGuitarFull, toggleLoaderGuitarFull } from './guitar-full-data/guitar-full-data';\r\nimport { loadGuitars } from './guitars-data/guitars-data';\r\nimport { postUserComment } from './post-comment-data/post-comment-data';\r\nimport { reviewSendStatus } from './review-send-status/review-send-status';\r\nimport { AppDispatch, State } from '../types/state';\r\nimport { AxiosInstance } from 'axios';\r\nimport { redirectToRoute } from './action';\r\n\r\n\r\nexport const fetchGuitarsAction = createAsyncThunk<void, undefined, {\r\n  dispatch: AppDispatch,\r\n  state: State,\r\n  extra: AxiosInstance\r\n}>(\r\n  'data/fetchGuitars',\r\n  async (_arg, {dispatch, extra: api}) => {\r\n    try {\r\n      const {data} = await api.get<Guitars>(APIRoute.Guitars);\r\n      dispatch(loadGuitars(data));\r\n    } catch(error) {\r\n      errorHandle(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const fetchFullGuitarAction = createAsyncThunk<void, undefined, {\r\n  dispatch: AppDispatch,\r\n  state: State,\r\n  extra: AxiosInstance\r\n}>(\r\n  'data/fetchFullGuitar',\r\n  async (id, {dispatch, extra: api}) => {\r\n    try {\r\n      const {data} = await api.get<Guitar>(`${APIRoute.FullGuitar}/${id}`);\r\n      dispatch(loadGuitarFull(data));\r\n    } catch (error) {\r\n      errorHandle(error);\r\n      dispatch(toggleLoaderGuitarFull());\r\n      dispatch(redirectToRoute(AppRoute.NoFoundScreen));\r\n    }\r\n  },\r\n);\r\n\r\nexport const fetchCommentsAction = createAsyncThunk<void, undefined, {\r\n  dispatch: AppDispatch,\r\n  state: State,\r\n  extra: AxiosInstance\r\n}>(\r\n  'data/fetchComments',\r\n  async (id, {dispatch, extra: api}) => {\r\n    try {\r\n      const {data} = await api.get<Comments>(`${APIRoute.FullGuitar}/${id}/comments`);\r\n      dispatch(loadComments(data));\r\n    } catch (error) {\r\n      errorHandle (error);\r\n      dispatch(toggleLoaderComments());\r\n    }\r\n  },\r\n);\r\n\r\nexport const addComment = createAsyncThunk<void, Comment, {\r\n  dispatch: AppDispatch,\r\n  state: State,\r\n  extra: AxiosInstance\r\n}>(\r\n  'data/addComment',\r\n  async (comment: Comment, {dispatch, extra: api} ) => {\r\n    try {\r\n      dispatch(reviewSendStatus('sending'));\r\n      const {data} = await api.post<Comment>(`${APIRoute.Comments}`, {comment});\r\n      dispatch(postUserComment(data));\r\n      dispatch(reviewSendStatus('initial'));\r\n    } catch (error) {\r\n      errorHandle (error);\r\n      dispatch(reviewSendStatus('error'));\r\n    }\r\n  },\r\n);\r\n"]},"metadata":{},"sourceType":"module"}